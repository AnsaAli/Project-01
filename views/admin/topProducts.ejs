<%- include('../layout/adminHeader.ejs') %>

<div class="card">
    <div class="card-header" style="text-align: center;">
        <h5 style="font-weight: bold; font-size: 25px; margin-top: 8px;">Top Selling Products</h5>
    </div>
    <div class="card-body m-5">
        <div class="table-responsive">
            <table class="table" id="productTable">
                <thead class="text-primary" style="font-size: small;">
                    <th style="font-weight: bold;">Image</th>
                    <th style="font-weight: bold;">Name</th>
                    <th style="font-weight: bold;">Category</th>
                    <th style="font-weight: bold;">Total Quantity Ordered</th>
                </thead>
                <tbody>
                    <% products.forEach(product => { %>
                        <tr>
                            <td>
                                <img src="<%= product.productDetails.images[0].url %>" alt="Product Image"
                                    class="img-fluid mx-auto d-block" alt="Product Image" style="width:100px; height: 100px;">
                            </td>
                            <td>
                                <%= product.productDetails.productName %>
                            </td>
                            <td>
                                <%= product.categoryDetails && product.categoryDetails.name ? product.categoryDetails.name : 'No category assigned' %>
                            </td>
                            <td>
                                <%= product.count %> g
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
            <div class="pagination">
              
                <% if (currentPage > 1) { %>
                    <a href="/admin/findTop?page=<%= currentPage - 1 %>">&laquo; [ Previous ]</a>
                <% } %>
                
                <% for (let i = 1; i <= totalPages; i++) { %>
                    <% if (i === currentPage) { %>
                        <span>[ <%= i %> ]</span>
                    <% } else { %>
                        <a href="/admin/findTop?page=<%= i %>">[ <%= i %> ]</a>
                    <% } %>
                <% } %>
                
                <% if (currentPage < totalPages) { %>
                    <a href="/admin/findTop?page=<%= currentPage + 1 %>">[ Next ] &raquo;</a>
                <% } %>

            </div>
            
            
        </div>
        </div>

</div>
<script>

</script>

<%- include('../layout/adminFooter.ejs') %>
